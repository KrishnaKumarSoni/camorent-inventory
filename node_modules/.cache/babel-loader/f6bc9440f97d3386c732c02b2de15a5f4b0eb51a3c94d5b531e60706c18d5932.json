{"ast":null,"code":"var _jsxFileName = \"/Users/admin/Desktop/Dev/camorent-inventory/src/pages/AddItemPage.tsx\",\n  _s2 = $RefreshSig$();\nimport React, { useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { useAuth } from '../contexts/AuthContext';\nimport { api } from '../utils/api';\nimport VoiceRecorder from '../components/VoiceRecorder';\nimport ProcessingModal from '../components/ProcessingModal';\nimport EquipmentForm from '../components/EquipmentForm';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst AddItemPage = () => {\n  _s2();\n  var _s = $RefreshSig$();\n  const [pageState, setPageState] = useState('recording');\n  const [audioBlob, setAudioBlob] = useState(null);\n  const [extractedData, setExtractedData] = useState(null);\n  const [saving, setSaving] = useState(false);\n  const navigate = useNavigate();\n  const handleRecordingComplete = blob => {\n    setAudioBlob(blob);\n    setPageState('processing');\n  };\n  const handleProcessingComplete = data => {\n    setExtractedData(data);\n    setPageState('form');\n  };\n  const handleProcessingCancel = () => {\n    setPageState('recording');\n    setAudioBlob(null);\n  };\n  const handleFormSubmit = async formData => {\n    _s();\n    setSaving(true);\n    try {\n      var _skuResult$data;\n      const {\n        user\n      } = useAuth();\n      if (!user) {\n        throw new Error('User not authenticated');\n      }\n\n      // First, create or find the SKU\n      const skuData = {\n        name: formData.name,\n        brand: formData.brand,\n        model: formData.model,\n        category: formData.category,\n        description: formData.description,\n        specifications: formData.specifications,\n        price_per_day: formData.pricePerDay,\n        security_deposit: formData.securityDeposit\n      };\n      const skuResult = await api.createSKU(skuData);\n      if (!skuResult.success) {\n        throw new Error(skuResult.error || 'Failed to create SKU');\n      }\n      const skuId = (_skuResult$data = skuResult.data) === null || _skuResult$data === void 0 ? void 0 : _skuResult$data.id;\n\n      // Then, create the inventory item (always available for initial digitalization)\n      const inventoryData = {\n        sku_id: skuId,\n        serial_number: formData.serialNumber,\n        barcode: formData.barcode,\n        condition: formData.condition,\n        status: 'available',\n        // Default status for digitalization\n        location: formData.location,\n        purchase_price: formData.purchasePrice,\n        current_value: formData.currentValue,\n        notes: formData.notes,\n        created_by: user.uid\n      };\n      const inventoryResult = await api.createInventoryItem(inventoryData);\n      if (!inventoryResult.success) {\n        throw new Error(inventoryResult.error || 'Failed to create inventory item');\n      }\n\n      // Navigate to inventory page after successful save\n      navigate('/inventory');\n    } catch (error) {\n      console.error('Error saving equipment:', error);\n      alert('Failed to save equipment. Please try again.');\n    } finally {\n      setSaving(false);\n    }\n  };\n  _s(handleFormSubmit, \"9ep4vdl3mBfipxjmc+tQCDhw6Ik=\", false, function () {\n    return [useAuth];\n  });\n  const handleFormCancel = () => {\n    setPageState('recording');\n    setAudioBlob(null);\n    setExtractedData(null);\n  };\n  if (pageState === 'form') {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"p-6\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-center mb-8\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"font-heading font-bold text-primary text-2xl mb-2\",\n          children: \"Review & Save Equipment\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-gray-medium\",\n          children: \"Verify details and add to digital inventory\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(EquipmentForm, {\n        initialData: extractedData,\n        confidenceScores: extractedData === null || extractedData === void 0 ? void 0 : extractedData.confidence_scores,\n        onSubmit: handleFormSubmit,\n        onCancel: handleFormCancel,\n        loading: saving\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"p-6\",\n      style: {\n        backgroundColor: '#f0f8ff',\n        minHeight: '400px',\n        border: '2px solid blue'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-center mb-8\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"font-heading font-bold text-primary text-2xl mb-2\",\n          children: \"Digitalize Equipment\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-gray-medium\",\n          children: \"Record equipment details to add to digital inventory\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          style: {\n            color: 'red',\n            fontSize: '16px',\n            marginTop: '10px'\n          },\n          children: [\"DEBUG: AddItemPage is rendering! Current state: \", pageState]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(VoiceRecorder, {\n        onRecordingComplete: handleRecordingComplete,\n        onCancel: () => navigate('/inventory')\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(ProcessingModal, {\n      isOpen: pageState === 'processing',\n      onCancel: handleProcessingCancel,\n      onComplete: handleProcessingComplete,\n      audioBlob: audioBlob\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n_s2(AddItemPage, \"PUIVVKakh0IbtBc6xnpr3Y9tjUE=\", false, function () {\n  return [useNavigate];\n});\n_c = AddItemPage;\nexport default AddItemPage;\nvar _c;\n$RefreshReg$(_c, \"AddItemPage\");","map":{"version":3,"names":["React","useState","useNavigate","useAuth","api","VoiceRecorder","ProcessingModal","EquipmentForm","jsxDEV","_jsxDEV","Fragment","_Fragment","AddItemPage","_s2","_s","$RefreshSig$","pageState","setPageState","audioBlob","setAudioBlob","extractedData","setExtractedData","saving","setSaving","navigate","handleRecordingComplete","blob","handleProcessingComplete","data","handleProcessingCancel","handleFormSubmit","formData","_skuResult$data","user","Error","skuData","name","brand","model","category","description","specifications","price_per_day","pricePerDay","security_deposit","securityDeposit","skuResult","createSKU","success","error","skuId","id","inventoryData","sku_id","serial_number","serialNumber","barcode","condition","status","location","purchase_price","purchasePrice","current_value","currentValue","notes","created_by","uid","inventoryResult","createInventoryItem","console","alert","handleFormCancel","className","children","fileName","_jsxFileName","lineNumber","columnNumber","initialData","confidenceScores","confidence_scores","onSubmit","onCancel","loading","style","backgroundColor","minHeight","border","color","fontSize","marginTop","onRecordingComplete","isOpen","onComplete","_c","$RefreshReg$"],"sources":["/Users/admin/Desktop/Dev/camorent-inventory/src/pages/AddItemPage.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { useAuth } from '../contexts/AuthContext';\nimport { api } from '../utils/api';\nimport VoiceRecorder from '../components/VoiceRecorder';\nimport ProcessingModal from '../components/ProcessingModal';\nimport EquipmentForm from '../components/EquipmentForm';\n\ntype PageState = 'recording' | 'processing' | 'form';\n\nconst AddItemPage: React.FC = () => {\n  const [pageState, setPageState] = useState<PageState>('recording');\n  const [audioBlob, setAudioBlob] = useState<Blob | null>(null);\n  const [extractedData, setExtractedData] = useState<any>(null);\n  const [saving, setSaving] = useState(false);\n  const navigate = useNavigate();\n\n  const handleRecordingComplete = (blob: Blob) => {\n    setAudioBlob(blob);\n    setPageState('processing');\n  };\n\n  const handleProcessingComplete = (data: any) => {\n    setExtractedData(data);\n    setPageState('form');\n  };\n\n  const handleProcessingCancel = () => {\n    setPageState('recording');\n    setAudioBlob(null);\n  };\n\n  const handleFormSubmit = async (formData: any) => {\n    setSaving(true);\n    try {\n      const { user } = useAuth();\n      if (!user) {\n        throw new Error('User not authenticated');\n      }\n\n      // First, create or find the SKU\n      const skuData = {\n        name: formData.name,\n        brand: formData.brand,\n        model: formData.model,\n        category: formData.category,\n        description: formData.description,\n        specifications: formData.specifications,\n        price_per_day: formData.pricePerDay,\n        security_deposit: formData.securityDeposit\n      };\n\n      const skuResult = await api.createSKU(skuData);\n\n      if (!skuResult.success) {\n        throw new Error(skuResult.error || 'Failed to create SKU');\n      }\n\n      const skuId = skuResult.data?.id;\n\n      // Then, create the inventory item (always available for initial digitalization)\n      const inventoryData = {\n        sku_id: skuId,\n        serial_number: formData.serialNumber,\n        barcode: formData.barcode,\n        condition: formData.condition,\n        status: 'available', // Default status for digitalization\n        location: formData.location,\n        purchase_price: formData.purchasePrice,\n        current_value: formData.currentValue,\n        notes: formData.notes,\n        created_by: user.uid\n      };\n\n      const inventoryResult = await api.createInventoryItem(inventoryData);\n\n      if (!inventoryResult.success) {\n        throw new Error(inventoryResult.error || 'Failed to create inventory item');\n      }\n\n      // Navigate to inventory page after successful save\n      navigate('/inventory');\n    } catch (error) {\n      console.error('Error saving equipment:', error);\n      alert('Failed to save equipment. Please try again.');\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  const handleFormCancel = () => {\n    setPageState('recording');\n    setAudioBlob(null);\n    setExtractedData(null);\n  };\n\n  if (pageState === 'form') {\n    return (\n      <div className=\"p-6\">\n        <div className=\"text-center mb-8\">\n          <h2 className=\"font-heading font-bold text-primary text-2xl mb-2\">\n            Review & Save Equipment\n          </h2>\n          <p className=\"text-gray-medium\">\n            Verify details and add to digital inventory\n          </p>\n        </div>\n\n        <EquipmentForm\n          initialData={extractedData}\n          confidenceScores={extractedData?.confidence_scores}\n          onSubmit={handleFormSubmit}\n          onCancel={handleFormCancel}\n          loading={saving}\n        />\n      </div>\n    );\n  }\n\n  return (\n    <>\n      <div className=\"p-6\" style={{backgroundColor: '#f0f8ff', minHeight: '400px', border: '2px solid blue'}}>\n        <div className=\"text-center mb-8\">\n          <h2 className=\"font-heading font-bold text-primary text-2xl mb-2\">\n            Digitalize Equipment\n          </h2>\n          <p className=\"text-gray-medium\">\n            Record equipment details to add to digital inventory\n          </p>\n          <p style={{color: 'red', fontSize: '16px', marginTop: '10px'}}>\n            DEBUG: AddItemPage is rendering! Current state: {pageState}\n          </p>\n        </div>\n\n        <VoiceRecorder\n          onRecordingComplete={handleRecordingComplete}\n          onCancel={() => navigate('/inventory')}\n        />\n      </div>\n\n      <ProcessingModal\n        isOpen={pageState === 'processing'}\n        onCancel={handleProcessingCancel}\n        onComplete={handleProcessingComplete}\n        audioBlob={audioBlob}\n      />\n    </>\n  );\n};\n\nexport default AddItemPage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}